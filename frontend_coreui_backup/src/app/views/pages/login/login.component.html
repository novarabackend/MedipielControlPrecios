<div class="bg-light dark:bg-transparent min-vh-100 d-flex flex-row align-items-center">
  <c-container breakpoint="md">
    <c-row class="justify-content-center">
      <c-col lg="6" xl="5">
        <c-card-group>
          <c-card class="p-4">
            <c-card-body>
              <h1>Acceso</h1>
              <p class="text-body-secondary">
                Autenticacion con OTP via Keycloak. Solo correos @medipiel.co.
              </p>

              @if (step() === 'request') {
                <form (ngSubmit)="onSendCode()" [formGroup]="emailForm" cForm>
                  <c-input-group class="mb-3">
                    <span cInputGroupText>
                      <svg cIcon name="cilEnvelopeClosed"></svg>
                    </span>
                    <input
                      autoComplete="email"
                      cFormControl
                      formControlName="email"
                      placeholder="correo@medipiel.co"
                      type="email"
                    />
                  </c-input-group>
                  <button cButton class="px-4 w-100" color="primary" type="submit">
                    Enviar codigo
                  </button>
                </form>
              } @else {
                <form (ngSubmit)="onVerify()" [formGroup]="otpForm" cForm>
                  <div class="mb-2 text-body-secondary small">
                    Codigo enviado a <strong>{{ emailPreview() }}</strong>
                  </div>
                  <c-input-group class="mb-3">
                    <span cInputGroupText>
                      <svg cIcon name="cilLockLocked"></svg>
                    </span>
                    <input
                      autoComplete="one-time-code"
                      cFormControl
                      formControlName="code"
                      placeholder="Codigo de acceso"
                      type="text"
                    />
                  </c-input-group>
                  <c-row>
                    <c-col xs="6">
                      <button cButton class="px-4 w-100" color="primary" type="submit">
                        Verificar
                      </button>
                    </c-col>
                    <c-col class="text-end" xs="6">
                      <button cButton class="px-0" color="link" type="button" (click)="onBack()">
                        Cambiar correo
                      </button>
                    </c-col>
                  </c-row>
                </form>
              }
            </c-card-body>
          </c-card>
        </c-card-group>
      </c-col>
    </c-row>
  </c-container>
</div>
